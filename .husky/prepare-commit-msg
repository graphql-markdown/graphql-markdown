#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# Exit early if not in interactive mode (CI/CD environments)
if [ ! -t 0 ]; then
  exit 0
fi

COMMIT_SOURCE="$2"

# Skip for merge commits, amend, rebase, etc.
if [ -n "$COMMIT_SOURCE" ]; then
  exit 0
fi

# Only run if /dev/tty exists (interactive terminal)
if [ -e /dev/tty ]; then
  # Run commitizen for interactive commit message creation
  if command -v bunx > /dev/null 2>&1; then
    exec < /dev/tty && bunx --bun cz --hook || true
  elif command -v npx > /dev/null 2>&1; then
    exec < /dev/tty && npx --no -- cz --hook || true
  fi
fi

